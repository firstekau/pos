(function(e){e(["text!shared/appView.template.html"],function(t){function n(){return{restrict:"E",template:t,scope:{path:"=",reload:"=",detail:"@"},controllerAs:"vm",bindToController:!0,controller:r}}function r(e,t,n,r,i,s,o,u,a){function l(){return s.getInfo(f.path).then(function(e){i.cancel(f.timer),f.value=e,f.b64img="data:image/png;base64,"+e.icon,f.stoppable=e.enabled,f.startable=!e.enabled,f.hasWarnings=u.getKeys(e.warnings).length>0,f.usageData=g(e),f.memoryStats=y(e.stats),f.cpuStats=E(e.stats),f.bandwidthStats=b(e.stats),f.latencyStats=w(e.stats),f.configOptions=a.getConfigInfo(e),f.showConfigButton=a.showConfigButton,f.lastUpdated=new Date}).then(function(){return f.timer=i(l,5e3),f.timer},function(){i.cancel(f.timer),f.timer=undefined})}function c(){r.path("/dashboard/overview"+f.path)}function h(){r.path("/config/swing"+f.path)}function p(e){i(function(){r.search("id",e),r.path("/dashboard/session"+f.path)},500)}function d(){s.start(f.path).then(function(){f.refresh()}),f.value.status.status="Requesting Start",f.stoppable=!1,f.startable=!1}function v(){s.stop(f.path).then(function(){f.refresh()}),f.value.status.status="Requesting Stop",f.stoppable=!1,f.startable=!1}function m(){s.remove(f.value.path).then(function(){f.refresh!=null&&(r.path("/dashboard"),f.reload!=null&&f.reload())}),f.value.status.status="Uninstalling Application",f.stoppable=!1,f.startable=!1}function g(e){var t=e.connectedInstances,n=e.runningInstances-t,r=e.maxRunningInstances-t-n,i=t+n,s=[];return s.push({label:"Connected",value:t,color:"#5cb85c"}),s.push({label:"Disconnected",value:n,color:"#f0ad4e"}),e.maxRunningInstances>=0&&(s.push({label:"Available",value:r,color:"#777"}),i+=r),i==0&&s.push({label:null,value:1,color:"#777"}),s}function y(e){return{names:["Total Max Memory","Total Used Memory"],keys:["memoryAllocated.SUM","memoryUsed.SUM"],dataset:u.getStatsDataset(e,["memoryAllocated.SUM","memoryUsed.SUM"]),tickFormat:function(e,t){return e>999?(e/1024).toFixed(1)+"GB":e+"MB"}}}function b(e){return{names:["Total Inbound trafic","Total Outbound trafic"],keys:["inboundSize.SUM","outboundSize.SUM"],dataset:u.getStatsDataset(e,["inboundSize.SUM","outboundSize.SUM"]),tickFormat:function(e,t){return e>1022976?(e/1024/1024).toFixed(1)+"m":Math.floor(e/1024)+"k"}}}function w(e){return{names:["Avg Ping latency","Avg Server rendering latency","Avg Client rendering latency","Max End-to-End Latency"],keys:["latencyPing.AVG","latencyServerRendering.AVG","latencyClientRendering.AVG","latency.MAX"],dataset:u.getStatsDataset(e,["latencyPing.AVG","latencyServerRendering.AVG","latencyClientRendering.AVG","latency.MAX"]),tickFormat:function(e,t){return e+"ms"}}}function E(e){return{names:["Total CPU Utilization"],keys:["cpuUtilization.SUM"],dataset:u.getStatsDataset(e,["cpuUtilization.SUM"]),tickFormat:function(e,t){return Math.floor(e)+"%"}}}function S(e,t){return n[e]!=null?n[e]:t}var f=this;f.permissions=o,f.b64img="",f.start=d,f.stop=v,f.remove=m,f.viewSessions=c,f.viewConfig=h,f.usageData=[0,0,0],f.usageOptions={thickness:10},f.lastUpdated=null,f.refresh=l,f.timer=undefined,f.viewSession=p,l(),e.$on("$destroy",function(){i.cancel(f.timer)}),e.$watch("vm.startable",function(t){e.$emit("wsStatusChanged",f)})}return r.$inject=["$scope","$element","$attrs","$location","$timeout","configRestService","permissions","wsUtils","extValue"],n})})(adminConsole.define);