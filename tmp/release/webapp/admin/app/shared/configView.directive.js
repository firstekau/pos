(function(e){e(["text!shared/configView.template.html"],function(t){function n(){return{restrict:"E",template:t,scope:{path:"=",value:"=",variables:"=",readonly:"=",apply:"=",reset:"="},controllerAs:"vm",bindToController:!0,controller:r}}function r(e,t,n,r,i,s,o,u,a){function l(e){a.startLoading();var n=t.find(".ws-panel-heading").first();u.getMeta(f.path,e).then(function(e){f.value=angular.extend({},f.value,e),f.isForm=!0,r(function(){n.height("auto"),a.stopLoading()},0)});var i=n.innerHeight();n.height(i)}function c(){f.isForm=!1,f.json=o.toJson(f.value)}function h(t){t.setReadOnly(f.readonly),e.$watch("vm.readonly",function(e){t.setReadOnly(e)}),f.updateJson=function(){f.isForm||(t.setValue(o.toJson(f.value)),t.gotoLine(0))},e.$watch("vm.value",f.updateJson,!0)}function p(){var e=f.value;try{l(JSON.parse(f.json))}catch(t){s.error("Failed to parse JSON. Back to last valid version.")}}function d(){f.isForm?f.apply(o.extractValues(f.value)):f.apply(JSON.parse(f.json)).then(f.updateJson)}function v(){f.reset().then(f.updateJson)}var f=this;f.showJson=c,f.showForm=p,f.isForm=!0,f.json={},f.aceLoaded=h,f.applyConfig=d,f.resetConfig=v,e.$on("wsHelperOpened",function(t,n,r){e.$broadcast("wsHelperClose",n,r)}),e.$on("wsRequestFormUpdate",function(e,t,n){r(function(){l(o.extractValues(f.value))},10)})}return r.$inject=["$scope","$element","$attrs","$timeout","$location","messageService","wsUtils","configRestService","loading"],n})})(adminConsole.define);