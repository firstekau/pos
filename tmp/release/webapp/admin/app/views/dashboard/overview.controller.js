(function(e){e([],function(){function t(e,t,n,r,i,s){function u(){return r.getSessions(o.path).then(function(e){t.cancel(o.timer),o.sessions=e.sessions,o.closedSessions=e.closedSessions,o.lastUpdated=new Date}).then(function(){return o.timer=t(u,2e3),o.timer},function(){t.cancel(o.timer),o.timer=undefined})}function a(e){o.sortExp===e?o.sortReverse=!o.sortReverse:(o.sortExp=e,o.sortReverse=!1)}function f(e){var t="metrics.memoryUsed";e!=null&&(t="metrics['memoryUsed."+e+"']"),a(t)}function l(e){var t="metrics.latency";e!=null&&(t="metrics['latency."+e+"']"),a(t)}function c(e){var t="metrics.inboundSize + metrics.outboundSize";e!=null&&(t="metrics['inboundSize."+e+"'] + metrics['outboundSize."+e+"']"),a(t)}function h(e){o.sortFinishedExp===e?o.sortFinishedReverse=!o.sortFinishedReverse:(o.sortFinishedExp=e,o.sortFinishedReverse=!1)}function p(e){if(e!=null)return e==="Windows"?"wsa-icon-windows":e==="Mac"||e==="IPhone"?"wsa-icon-apple":e==="Linux"?"wsa-icon-linux":e==="Android"?"wsa-icon-android":"wsa-icon-unknown"}function d(e){if(e!=null)return e.indexOf("IE")>=0?"wsa-icon-ie":e.indexOf("Safari")>=0?"wsa-icon-safari":e.indexOf("Opera")>=0?"wsa-icon-opera":e.indexOf("Chrome")>=0?"wsa-icon-chrome":e.indexOf("Firefox")>=0?"wsa-icon-firefox":"wsa-icon-unknown"}function v(e){return r.killSession(o.path,e.id).then(function(){u()})}function m(e){n.search("id",e.id),n.path("/dashboard/session/"+o.path)}function g(e){return r.recordSession(o.path,e.id).then(function(){u()})}function y(e){n.url("/dashboard/playback?playback="+e.recordingFile)}function b(){n.path("/dashboard/single/"+o.path),t.cancel(o.timer)}function w(){n.path("/config/swing/"+o.path),t.cancel(o.timer)}function E(e,t){window.open(r.getStackDumpPath(o.path,e.id,t),"_blank")}function S(e){r.requestThreadDump(o.path,e.id)}var o=this;o.path=i.path,o.sessions=[],o.closedSessions=[],o.view=m,o.record=g,o.lastUpdated=null,o.refresh=u,o.timer=undefined,o.play=y,o.back=b,o.kill=v,o.toConfig=w,o.sortExp="startedAt",o.sortReverse=!0,o.sortBy=a,o.sortByMetrics=f,o.sortByBandwidth=c,o.sortByLatency=l,o.sortFinishedExp="endedAt",o.sortFinishedReverse=!0,o.sortFinishedBy=h,o.getOsIcon=p,o.getBrowserIcon=d,o.showThreadDump=E,o.requestThreadDump=S,u(),e.$on("$destroy",function(){t.cancel(o.timer)}),e.$watch("vm.sessions",function(e){if(e!=null)for(var t=0;t<e.length;t++){var n=e[t];n.gauge={},n.gauge.cpu=s.getGaugeData(n.metrics,"Cpu","%","cpuUtilization",null,100,1)}})}return t.$inject=["$scope","$timeout","$location","sessionsRestService","$routeParams","wsUtils"],t})})(adminConsole.define);