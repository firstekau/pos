(function(e){e([],function(){function t(e,t,n,r,i,s,o){function a(){return i.getSession(u.path,u.sessionId).then(function(e){n.cancel(u.timer),u.session=e,u.memoryStats=c(e),u.cpuStats=h(e),u.bandwidthStats=p(e),u.latencyStats=d(e),u.lastUpdated=new Date})}function f(){return a().then(function(){return u.timer=n(f,2e3),u.timer},function(){n.cancel(u.timer),u.timer=undefined})}function l(){var e={autoStart:!1,connectionUrl:"/"+u.path,clientId:u.session.id,applicationName:u.session.application,control:u.control,mirrorMode:!0};window.webswingadmin.scan(),window.webswingadmin.webswingmirrorview.disconnect(),window.webswingadmin.webswingmirrorview.configure(e),window.webswingadmin.webswingmirrorview.start()}function c(e){return{names:["Max Memory","Used Memory"],keys:["memoryAllocated","memoryUsed"],dataset:o.getStatsDataset(e.stats,["memoryAllocated","memoryUsed"]),tickFormat:function(e,t){return e>999?(e/1024).toFixed(1)+"GB":e+"MB"}}}function h(e){return{names:["CPU Utilization"],keys:["cpuUtilization"],dataset:o.getStatsDataset(e.stats,["cpuUtilization"]),tickFormat:function(e,t){return Math.floor(e)+"%"}}}function p(e){return{names:["Inbound trafic","Outbound trafic"],keys:["inboundSize","outboundSize"],dataset:o.getStatsDataset(e.stats,["inboundSize","outboundSize"]),tickFormat:function(e,t){return Math.floor(e/1024)+"k"}}}function d(e){return{names:["Network ping latency","Network transfer latency","Server rendering latency","Client rendering latency"],keys:["latencyPing","latencyNetworkTransfer","latencyServerRendering","latencyClientRendering"],dataset:o.getStatsDataset(e.stats,["latencyPing","latencyNetworkTransfer","latencyServerRendering","latencyClientRendering"]),tickFormat:function(e,t){return e+"ms"}}}function v(){return i.killSession(u.path,u.sessionId).then(function(){y()})}function m(){return i.forceKillSession(u.path,u.sessionId).then(function(){y()})}function g(){return i.recordSession(u.path,u.sessionId).then(function(){f()})}function y(){r.path("/dashboard/overview/"+u.path),n.cancel(u.timer)}function b(e,t){window.open(i.getStackDumpPath(u.path,e.id,t),"_blank")}var u=this;u.path=s.path,u.sessionId=s.id,u.session={},u.lastUpdated=null,u.back=y,u.record=g,u.refresh=f,u.kill=v,u.forceKill=m,u.timer=undefined,u.control=!1,u.showThreadDump=b,a().then(l).then(f),t.$watch("vm.control",function(e){window.webswingadmin!=null&&window.webswingadmin.webswingmirrorview!=null&&e!=null&&window.webswingadmin.webswingmirrorview.setControl(e)}),t.$on("$destroy",function(){n.cancel(u.timer),window.webswingadmin.webswingmirrorview.disconnect()})}return t.$inject=["baseUrl","$scope","$timeout","$location","sessionsRestService","$routeParams","wsUtils"],t})})(adminConsole.define);