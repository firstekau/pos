webswingRequirejs.define(["jquery","text!templates/dialog.html"],function(t,n,r){return function(){function v(){return{emptyMessage:m("dialog.emptyMessage",!0),logingOut:m("dialog.logingOut"),readyDialog:m("dialog.readyDialog"),initializingDialog:m("dialog.initializingDialog",!0),startingDialog:m("dialog.startingDialog",!0),connectingDialog:m("dialog.connectingDialog",!0),applicationBusyDialog:m("dialog.applicationBusyDialog",!0),unauthorizedAccess:m("dialog.unauthorizedAccess"),applicationAlreadyRunning:y("dialog.applicationAlreadyRunning"),sessionStolenNotification:y("dialog.sessionStolenNotification"),disconnectedDialog:y("dialog.disconnectedDialog"),connectionErrorDialog:y("dialog.connectionErrorDialog"),tooManyClientsNotification:y("dialog.tooManyClientsNotification"),stoppedDialog:g("dialog.stoppedDialog"),timedoutDialog:g("dialog.timedoutDialog"),cookiesDisabledDialog:m("dialog.cookiesDisabledDialog"),continueOldSessionDialog:{header:'<span class="ws-message--neutral">${dialog.continueH} <span data-id="dialogHide" class="ws-icon-cancel-circled ws-right"></span></span>',content:'<p data-id="continueMsg">${dialog.continueC1}<a href="javascript:void(0)" data-id="restartLink">${dialog.continueC2}</a></p>',events:{restartLink_click:function(){i.kill(),i.newSession()},dialogHide_click:T,continueMsg_mouseenter:function(){c.focused=!0},continueMsg_mouseleave:function(){c.focused=!1}}},longPollingWarningDialog:{header:'<span class="ws-message--warning"><span class="ws-icon-warn"></span> ${dialog.longPollingH}</span>',content:"<p>${dialog.longPollingC} </p>",buttons:[{label:'<span class="ws-icon-cancel-circled"></span>  ${dialog.longPollingB}',action:function(){T()}}]},inactivityTimeoutWarningDialog:{header:'<span class="ws-message--warning"><span class="ws-icon-warn"></span> ${dialog.inactivityTimeoutH}</span>',content:"<p>${dialog.inactivityTimeoutC}  </p>",buttons:[{label:'<span class="ws-icon-cancel-circled"></span>  ${dialog.inactivityTimeoutB}',action:function(){T()}}]}}}function m(e,t){var n="<p>${"+e+"}</p>";return t&&(n='<div class="ws-spinner"><div class="ws-spinner-dot-1"></div> <div class="ws-spinner-dot-2"></div></div>'+n),{content:n}}function g(e){return{content:"<p>${"+e+"}</p>",buttons:[{label:'<span class="ws-icon-certificate"></class> ${dialog.finalB1}',action:function(){i.newSession()}},{label:'<span class="ws-icon-logout"></class> ${dialog.finalB2}',action:function(){i.logout()}}]}}function y(e){return{content:"<p>${"+e+"}</p>",buttons:[{label:'<span class="ws-icon-arrows-cw"></class> ${dialog.retryB1}',action:function(){i.reTrySession()}},{label:'<span class="ws-icon-logout"></class> ${dialog.retryB2}',action:function(){i.logout()}}]}}function b(){i.cfg.rootElement.append(n),f=i.cfg.rootElement.find('div[data-id="commonDialogBackDrop"]'),o=i.cfg.rootElement.find('div[data-id="commonDialog"]'),u=o.find('div[data-id="content"]'),a=o.find('div[data-id="header"]'),h=i.cfg.rootElement.find('div[data-id="commonBar"]'),p=h.find('div[data-id="content"]'),d=h.find('div[data-id="header"]'),h.hide(),t(document).ajaxStart(function(){l=setTimeout(function(){o.is(":visible")&&t("#ajaxProgress").slideDown("fast")},200)}).ajaxComplete(function(){clearTimeout(l),t("#ajaxProgress").hide()})}function w(e){if(e==null)return;return o==null&&b(),s=e,S(e,o,a,u),f.show(),o.slideDown("fast"),u}function E(e){if(e==null)return;return h==null&&b(),c=e,S(e,h,d,p),h.slideDown("fast"),p}function S(e,n,r,s){e.header!=null?(r.html(i.translate(e.header)),n.is(":visible")?r.fadeIn(200):r.show()):(r.hide(),r.html("")),s.html(i.translate(e.content));for(var o in e.events){var u=n.find('*[data-id="'+o.substring(0,o.lastIndexOf("_"))+'"]');u.bind(o.substring(o.lastIndexOf("_")+1),e.events[o])}for(var a in e.buttons){var f=e.buttons[a],l=t('<button class="ws-btn">'+i.translate(f.label)+"</button><span> </span>");l.on("click",f.action),s.append(l)}n.is(":visible")&&s.fadeIn("fast")}function x(){s=null,u.html(""),o.fadeOut("fast"),f.fadeOut("fast")}function T(){c=null,p.html(""),h.fadeOut("fast")}function N(){return s}function C(){return c}var r=this,i;r.injects=i={cfg:"webswing.config",continueSession:"base.continueSession",kill:"base.kill",newSession:"webswing.newSession",reTrySession:"webswing.reTrySession",logout:"login.logout",translate:"translate.translate"},r.provides={show:w,hide:x,current:N,content:v(),currentBar:C,showBar:E,hideBar:T};var s,o,u,a,f,l,c,h,p,d}});