webswingRequirejs.define(["jquery","webswing-util"],function(t,n){return function(){function o(e){var t={securityToken:i.cfg.securityToken,realm:i.cfg.realm,successUrl:window.top.location.href},r=function(){return i.showDialog(i.emptyMessage)};n.webswingLogin(i.cfg.connectionUrl,r,t,function(t,n){s=n.getResponseHeader("webswingUsername"),e!=null&&e()})}function u(){var e=i.showDialog(i.logingOut);n.webswingLogout(i.cfg.connectionUrl,e,function(t){i.disconnect(),i.start()})}function a(){t.ajax({url:i.cfg.connectionUrl+"login"})}function f(){return s}var r=this,i;r.injects=i={cfg:"webswing.config",start:"webswing.start",disconnect:"webswing.disconnect",showDialog:"dialog.show",logingOut:"dialog.content.logingOut",emptyMessage:"dialog.content.emptyMessage"},r.provides={login:o,logout:u,touchSession:a,user:f};var s}});