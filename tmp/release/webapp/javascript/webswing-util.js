webswingRequirejs.define(["jquery","webswing-translate"],function(t,n){function i(e,n,s,o){t.ajax({headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:!0},type:"POST",url:e+"login",contentType:typeof s=="object"?"application/json":"application/x-www-form-urlencoded; charset=UTF-8",data:typeof s=="object"?JSON.stringify(s):s,success:function(e,t,n){o!=null&&o(e,n)},error:function(t){var s=t.responseText;if(s!=null){var u={};try{u=JSON.parse(s)}catch(a){u.partialHtml=r("<p>${login.failedToAuthenticate}</p>")}if(u.redirectUrl!=null)window.top.location.href=u.redirectUrl;else if(u.partialHtml!=null){typeof n=="function"&&(n=n()),n.html(r(u.partialHtml));var f=n.find("form").first();f.submit(function(t){n.find("#progress").show(),i(e,n,f.serialize(),o),t.preventDefault()})}else n.html(r("<p>${login.unexpectedError}</p>"))}else n.html(r("<p>${login.serverNotAvailable}</p>"))}})}function s(e,n,i){t.ajax({type:"GET",url:e+"logout",xhrFields:{withCredentials:!0},headers:{"X-Requested-With":"XMLHttpRequest"}}).done(function(e,t,s){var o=s.responseText;if(o!=null){var u={};try{u=JSON.parse(o)}catch(a){i()}u.redirectUrl!=null?window.top.location.href=u.redirectUrl:u.partialHtml!=null?(typeof n=="function"&&(n=n()),n.html(r(u.partialHtml))):i()}else n.html(r("<p>${login.serverNotAvailable}</p>"))})}function o(){return"ontouchstart"in window}function u(e){if(typeof e=="object"){var t="",n=new Uint8Array(e.buffer,e.offset,e.limit-e.offset);for(var r=0,i=n.byteLength;r<i;r++)t+=String.fromCharCode(n[r]);e=window.btoa(t)}return"data:image/png;base64,"+e}function a(e,t,n){e.addEventListener!=null&&e.addEventListener(t,n)}function f(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):!1}function l(e){function s(e,n){var s=Date.now();if(e!==r){if(s-i<=t)return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),!1;r=e}i=s}function o(t,n){t.forEach(function(t){e[0].addEventListener(t,s.bind(null,n),!0)})}var t=2e3,n={MOUSE:0,TOUCH:1},r,i,u=["mousedown","mouseup","mousemove"],a=["touchstart","touchend"];o(u,n.MOUSE),o(a,n.TOUCH)}function c(){var e=function(){return Math.floor(Math.random()*65536).toString(16)};return e()+e()+e()}function h(){return navigator.platform.toUpperCase().indexOf("MAC")>=0}function p(e,t,n){var r;if(n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3),r="; expires="+i.toGMTString()}else r="";document.cookie=escape(e)+"="+escape(t)+r+"; path=/"}function d(e){var t=escape(e)+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return unescape(i.substring(t.length,i.length))}return null}function v(e){p(e,"",-1)}function m(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var e=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}t.fn.extend({animateCss:function(e){var n="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";this.addClass("animated "+e).one(n,function(){t(this).removeClass("animated "+e)})}});var r=(new n).provides.translate;return{webswingLogin:i,webswingLogout:s,isTouchDevice:o,getImageString:u,bindEvent:a,detectIE:f,preventGhosts:l,GUID:c,detectMac:h,createCookie:p,readCookie:d,eraseCookie:v,checkCookie:m}});